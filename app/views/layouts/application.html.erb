<!DOCTYPE html>
<html>
<head>
  <title>try! Swift</title>
  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <%= csrf_meta_tags %>
</head>
<body>

<nav class='navigation'>
  <ol>
    <li><a href='#top' class='js-home'>ホーム</a></li>
    <li><a href='#speakers' class='js-speakers'>講演者</a></li>
    <!-- <li><a href='#schedule'>Schedule</a></li> -->
    <li><a href='#coc' class='js-coc'>行動規範</a></li>
    <li><a href='#tickets' class='js-tickets'>チケット</a></li>
    <li><a href='#location' class='js-location'>会場</a></li>
    <li><a href='#sponsors' class='js-sponsors'>スポンサー</a></li>
    <li><a href='#organizers' class='js-organizers'>主催者</a></li>
    <li><a href='#contact' class='js-contact'>お問い合わせ</a></li>
    <li><a href='/en'>English</a></li>
  </ol>

  <div class='purchase-ticket'>
      <a href='#tickets' id='purchase-ticket'>チケットの購入</a>
  </div>
</nav>

<div id='top'></div>

<%= yield %>

<script>
var windowscrolllocation;

$(window).scroll(function(){
  var windowscrolllocation = $(this).scrollTop();
  $('.putmehere').html(windowscrolllocation);

    var home = document.getElementById('top');
    if (isScrolledIntoView(home))
    {
        removeActiveFromAll()
        $('.js-home').addClass('active');
    } else {
        $('.js-home').removeClass('active');
    }

    var speakers = document.getElementById("speakers");
    if (isScrolledIntoView(speakers))
    {
        removeActiveFromAll()
        $('.js-speakers').addClass('active');
    } else {
        $('.js-speakers').removeClass('active');
    }

    var coc = document.getElementById('coc');
    if (isScrolledIntoView(coc))
    {
        removeActiveFromAll()
        $('.js-coc').addClass('active');
    } else {
        $('.js-coc').removeClass('active');
    }

    var tickets = document.getElementById('tickets');
    if (isScrolledIntoView(tickets))
    {
        removeActiveFromAll()
        $('.js-tickets').addClass('active');
    } else {
        $('.js-tickets').removeClass('active');
    }

    var location = document.getElementById('location');
    if (isScrolledIntoView(location))
    {
        removeActiveFromAll()
        $('.js-location').addClass('active');
    } else {
        $('.js-location').removeClass('active');
    }

    var sponsors = document.getElementById('sponsors');
    if (isScrolledIntoView(sponsors))
    {
        removeActiveFromAll()
        $('.js-sponsors').addClass('active');
    } else {
        $('.js-sponsors').removeClass('active');
    }

    var organizers = document.getElementById('organizers');
    if (isScrolledIntoView(organizers))
    {
        removeActiveFromAll()
        $('.js-organizers').addClass('active');
    } else {
        $('.js-organizers').removeClass('active');
    }

    var contact = document.getElementById('contact');
    if (isScrolledIntoView(contact))
    {
        removeActiveFromAll()
        $('.js-contact').addClass('active');
    } else {
        $('.js-contact').removeClass('active');
    }

    function isScrolledIntoView(elem) {
        var docViewTop = $(window).scrollTop();
        var docViewBottom = docViewTop + $(window).height();

        var elemTop = $(elem).offset().top;
        var elemBottom = elemTop + $(elem).height();

        return ((elemBottom >= docViewTop) && (elemTop <= docViewBottom));
    }

    function removeActiveFromAll() {
        $('.js-home').removeClass('active');
        $('.js-speakers').removeClass('active');
        $('.js-coc').removeClass('active');
        $('.js-tickets').removeClass('active');
        $('.js-location').removeClass('active');
        $('.js-sponsors').removeClass('active');
        $('.js-organizers').removeClass('active');
        $('.js-contact').removeClass('active');
    }


});
</script>

</body>
</html>
